(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var isUndefined = require('./isUndefined');
var isNull = require('./isNull');

/**
 * exist value.
 * value is not undefined and null.
 *
 * @param {*} val check value.
 * @return {Boolean}
 */
module.exports = function(val) {
  return !isUndefined(val) && !isNull(val);
};

},{"./isNull":2,"./isUndefined":3}],2:[function(require,module,exports){
/**
 * check null value
 *
 * @param {*} val check value.
 * @return {Boolean}
 */
module.exports = function(val) {
  return val === null;
};

},{}],3:[function(require,module,exports){
/**
 * check value is undefined.
 *
 * @param {*} val checked value.
 * @return {Boolean}
 */
module.exports = function(val) {
  return typeof val === 'undefined';
};

},{}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _existy = require('swsutils/src/existy');

var _existy2 = _interopRequireDefault(_existy);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = function (el, key, orig) {
  if ((0, _existy2.default)(el) && el.hasAttribute(key)) {
    return el.getAttribute(key);
  }
  return orig;
};

},{"swsutils/src/existy":1}],5:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _existy = require('swsutils/src/existy');

var _existy2 = _interopRequireDefault(_existy);

var _attr = require('./attr.js');

var _attr2 = _interopRequireDefault(_attr);

var _ripple = require('./ripple.js');

var _ripple2 = _interopRequireDefault(_ripple);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var makeBgImage = function makeBgImage(weight, fgColor, image) {
  if ((0, _existy2.default)(image)) {
    return image;
  }
  var c = fgColor.replace(/^#/, '');
  if (weight === 'bold') {
    return 'data:image/svg+xml;charset=utf8, %3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 width=%2710px%27 height=%2710px%27%3E %3Cpolygon fill=%27%23' + c + '%27 stroke=%27none%27 points=%278.646,7.354 5,3.707 1.354,7.354 0.646,6.646 5,2.293 9.354,6.646%27 /%3E %3C/svg%3E';
  }
  return 'data:image/svg+xml;charset=utf8,%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 width=%2710px%27 height=%2710px%27%3E %3Cpolygon fill=%27%23' + c + '%27 stroke=%27none%27 points=%278.589,6.945 5,3.22 1.413,6.945 1.052,6.598 5,2.499 8.948,6.598%27 /%3E %3C/svg%3E';
};

exports.default = function (el, size, image) {
  var right = (0, _attr2.default)(el, 'data-sws-gotop-right', '50px');
  var bottom = (0, _attr2.default)(el, 'data-sws-gotop-bottom', '100px');
  var bottomGap = (0, _attr2.default)(el, 'data-sws-gotop-bottom-gap', '0px');
  var zIndex = (0, _attr2.default)(el, 'data-sws-gotop-z-index', 1000);
  var bgColor = (0, _attr2.default)(el, 'data-sws-gotop-bg-color', '#ffc966');
  var fgColor = (0, _attr2.default)(el, 'data-sws-gotop-fg-color', '#ffffff');
  var opacity = (0, _attr2.default)(el, 'data-sws-gotop-opacity', 1);
  var radius = (0, _attr2.default)(el, 'data-sws-gotop-radius', '50%');
  var weight = (0, _attr2.default)(el, 'data-sws-gotop-weight', 'normal');
  var rippleBg = (0, _attr2.default)(el, 'data-sws-gotop-ripple-color', 'rgba(255, 255, 255, .5)');

  // add ripple layer
  if (!(0, _existy2.default)(image)) {
    (0, _ripple2.default)(el);
  }

  // add style.
  var bgSize = (0, _existy2.default)(image) ? '100%' : '70%';
  return '\n#sws-gotop {\n  overflow: hidden;\n  position: fixed;\n  right: ' + right + ';\n  bottom: calc(' + bottom + ' - ' + bottomGap + ');\n  z-index: -1;\n  width: ' + size + 'px;\n  height: ' + size + 'px;\n  color: ' + fgColor + ';\n  background-color: ' + bgColor + ';\n  background-image: url("' + makeBgImage(weight, fgColor, image) + '");\n  background-repeat: no-repeat;\n  background-position: 50% 50%;\n  background-size: ' + bgSize + ' auto;\n  box-shadow: 1px 1px 2px rgba(0, 0, 0, .3);\n  opacity: 0;\n  border-radius: ' + radius + ';\n  cursor: pointer;\n  transition: none .2s ease-out 0s;\n  transition-property: opacity, bottom;\n}\n#sws-gotop.is-sws-gotop-active {\n  bottom: ' + bottom + ';\n  z-index: ' + zIndex + ';\n  opacity: 1;\n}\n#sws-gotop.is-sws-gotop-active:hover {\n  opacity: ' + opacity + ';\n}\n#sws-gotop .sws-gotop-ripple {\n  position: absolute;\n  width: ' + size * 2 + 'px;\n  height: ' + size * 2 + 'px;\n  background-color: ' + rippleBg + ';\n  border-radius: 50%;\n  transform: scale(0);\n  opacity: 0;\n  pointer-events: none;\n}\n#sws-gotop .sws-gotop-ripple.is-sws-gotop-ripple-animate {\n  animation: sws-gotop-ripple-animation .75s ease-out;\n}\n@keyframes sws-gotop-ripple-animation {\n  from {\n    opacity: 1;\n  }\n  to {\n    transform: scale(2);\n    opacity: 0;\n  }\n}\n';
};

},{"./attr.js":4,"./ripple.js":8,"swsutils/src/existy":1}],6:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _attr = require('./attr.js');

var _attr2 = _interopRequireDefault(_attr);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var isMobile = function isMobile(el) {
  var width = (0, _attr2.default)(el, 'data-sws-gotop-mobile-width', 640);
  if (parseInt(width, 10) === 0) {
    return false;
  }
  return window.matchMedia('(max-width: ' + width + 'px)').matches;
};

exports.default = function (el) {
  var display = 'block';
  if (isMobile(el)) {
    display = 'none';
  }
  el.style.display = display;
};

},{"./attr.js":4}],7:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _existy = require('swsutils/src/existy');

var _existy2 = _interopRequireDefault(_existy);

var _attr = require('./attr.js');

var _attr2 = _interopRequireDefault(_attr);

var _css = require('./css.js');

var _css2 = _interopRequireDefault(_css);

var _scroll = require('./scroll.js');

var _scroll2 = _interopRequireDefault(_scroll);

var _display = require('./display.js');

var _display2 = _interopRequireDefault(_display);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var KEY_ENTER = 13;

exports.default = function () {

  var elSwsGotop = document.getElementById('sws-gotop');

  if ((0, _existy2.default)(elSwsGotop)) {
    var boundary = (0, _attr2.default)(elSwsGotop, 'data-sws-gotop-boundary', 200);
    var size = parseInt((0, _attr2.default)(elSwsGotop, 'data-sws-gotop-size', 50), 10);
    var image = (0, _attr2.default)(elSwsGotop, 'data-sws-gotop-src', null);

    // add style.
    var elStyle = document.createElement('STYLE');
    elStyle.textContent = (0, _css2.default)(elSwsGotop, size, image);
    document.head.appendChild(elStyle);

    // scroll to top by click event.
    var elRipple = elSwsGotop.querySelector('.sws-gotop-ripple');
    elSwsGotop.addEventListener('click', function (e) {
      e.preventDefault();
      if ((0, _existy2.default)(elRipple)) {
        var rect = elSwsGotop.getBoundingClientRect();
        elRipple.style.left = e.clientX - rect.left - size + 'px';
        elRipple.style.top = e.clientY - rect.top - size + 'px';
        if (!elRipple.classList.contains('is-sws-gotop-ripple-animate')) {
          elRipple.classList.add('is-sws-gotop-ripple-animate');
          setTimeout(function () {
            elRipple.classList.remove('is-sws-gotop-ripple-animate');
          }, 750);
        }
      }
      (0, _scroll2.default)();
    }, false);

    // scroll to top by enter key down event.
    elSwsGotop.addEventListener('keydown', function (e) {
      e.preventDefault();
      if (e.keyCode === KEY_ENTER) {
        (0, _scroll2.default)();
      }
    }, false);

    // toggle display by scrolling.
    var requestID = void 0;
    window.addEventListener('scroll', function () {
      if (requestID) {
        cancelAnimationFrame(requestID);
      }
      var method = window.pageYOffset > boundary ? 'add' : 'remove';
      elSwsGotop.classList[method]('is-sws-gotop-active');
    }, false);

    // hide element with mobile device.
    window.addEventListener('resize', function () {
      (0, _display2.default)(elSwsGotop);
    }, false);
    (0, _display2.default)(elSwsGotop);
  }
};

},{"./attr.js":4,"./css.js":5,"./display.js":6,"./scroll.js":9,"swsutils/src/existy":1}],8:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (el) {
  var elRipple = document.createElement('DIV');
  elRipple.classList.add('sws-gotop-ripple');
  el.appendChild(elRipple);
};

},{}],9:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
var SCROLL_SPEED = 1000;
var INTERVAL = 16;

var easing = function easing(t, b, c, d) {
  return c * ((t = t / d - 1) * t * t + 1) + b;
};

var scrollTo = function scrollTo(from, to) {
  var startTime = new Date();
  var distance = to - from;
  var intervalId = setInterval(function () {
    var time = new Date() - startTime;
    var current = easing(time, from, distance, SCROLL_SPEED);

    if (time > SCROLL_SPEED) {
      clearInterval(intervalId);
      current = from + distance;
    }

    window.scrollTo(0, current);
  }, INTERVAL);
};

var scroll = function scroll() {
  var from = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
  var to = 0;
  scrollTo(from, to);
};

exports.default = scroll;

},{}],10:[function(require,module,exports){
'use strict';

var _index = require('./index.js');

var _index2 = _interopRequireDefault(_index);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

document.addEventListener('DOMContentLoaded', _index2.default, false);

},{"./index.js":7}]},{},[10])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvc3dzdXRpbHMvc3JjL2V4aXN0eS5qcyIsIm5vZGVfbW9kdWxlcy9zd3N1dGlscy9zcmMvaXNOdWxsLmpzIiwibm9kZV9tb2R1bGVzL3N3c3V0aWxzL3NyYy9pc1VuZGVmaW5lZC5qcyIsInNyYy9hdHRyLmpzIiwic3JjL2Nzcy5qcyIsInNyYy9kaXNwbGF5LmpzIiwic3JjL2luZGV4LmpzIiwic3JjL3JpcHBsZS5qcyIsInNyYy9zY3JvbGwuanMiLCJzcmMvc3dzLWdvdG9wLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUNUQTs7Ozs7O2tCQUVlLFVBQUMsRUFBRCxFQUFLLEdBQUwsRUFBVSxJQUFWLEVBQW1CO0FBQ2hDLE1BQUksc0JBQU8sRUFBUCxLQUFjLEdBQUcsWUFBSCxDQUFnQixHQUFoQixDQUFsQixFQUF3QztBQUN0QyxXQUFPLEdBQUcsWUFBSCxDQUFnQixHQUFoQixDQUFQO0FBQ0Q7QUFDRCxTQUFPLElBQVA7QUFDRCxDOzs7Ozs7Ozs7QUNQRDs7OztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBLElBQU0sY0FBYyxTQUFkLFdBQWMsQ0FBQyxNQUFELEVBQVMsT0FBVCxFQUFrQixLQUFsQixFQUE0QjtBQUM5QyxNQUFJLHNCQUFPLEtBQVAsQ0FBSixFQUFtQjtBQUNqQixXQUFPLEtBQVA7QUFDRDtBQUNELE1BQUksSUFBSSxRQUFRLE9BQVIsQ0FBZ0IsSUFBaEIsRUFBc0IsRUFBdEIsQ0FBUjtBQUNBLE1BQUksV0FBVyxNQUFmLEVBQXVCO0FBQ3JCLFdBQU8sa0tBQWtLLENBQWxLLEdBQXNLLG9IQUE3SztBQUNEO0FBQ0QsU0FBTyxpS0FBaUssQ0FBakssR0FBcUssbUhBQTVLO0FBQ0QsQ0FURDs7a0JBWWUsVUFBQyxFQUFELEVBQUssSUFBTCxFQUFXLEtBQVgsRUFBcUI7QUFDbEMsTUFBSSxRQUFZLG9CQUFLLEVBQUwsRUFBUyxzQkFBVCxFQUFpQyxNQUFqQyxDQUFoQjtBQUNBLE1BQUksU0FBWSxvQkFBSyxFQUFMLEVBQVMsdUJBQVQsRUFBa0MsT0FBbEMsQ0FBaEI7QUFDQSxNQUFJLFlBQVksb0JBQUssRUFBTCxFQUFTLDJCQUFULEVBQXNDLEtBQXRDLENBQWhCO0FBQ0EsTUFBSSxTQUFZLG9CQUFLLEVBQUwsRUFBUyx3QkFBVCxFQUFtQyxJQUFuQyxDQUFoQjtBQUNBLE1BQUksVUFBWSxvQkFBSyxFQUFMLEVBQVMseUJBQVQsRUFBb0MsU0FBcEMsQ0FBaEI7QUFDQSxNQUFJLFVBQVksb0JBQUssRUFBTCxFQUFTLHlCQUFULEVBQW9DLFNBQXBDLENBQWhCO0FBQ0EsTUFBSSxVQUFZLG9CQUFLLEVBQUwsRUFBUyx3QkFBVCxFQUFtQyxDQUFuQyxDQUFoQjtBQUNBLE1BQUksU0FBWSxvQkFBSyxFQUFMLEVBQVMsdUJBQVQsRUFBa0MsS0FBbEMsQ0FBaEI7QUFDQSxNQUFJLFNBQVksb0JBQUssRUFBTCxFQUFTLHVCQUFULEVBQWtDLFFBQWxDLENBQWhCO0FBQ0EsTUFBSSxXQUFZLG9CQUFLLEVBQUwsRUFBUyw2QkFBVCxFQUF3Qyx5QkFBeEMsQ0FBaEI7O0FBRUE7QUFDQSxNQUFJLENBQUMsc0JBQU8sS0FBUCxDQUFMLEVBQW9CO0FBQ2xCLDBCQUFPLEVBQVA7QUFDRDs7QUFFRDtBQUNBLE1BQUksU0FBUyxzQkFBTyxLQUFQLElBQWdCLE1BQWhCLEdBQXlCLEtBQXRDO0FBQ0EsZ0ZBSVMsS0FKVCwwQkFLZSxNQUxmLFdBSzJCLFNBTDNCLHFDQU9TLElBUFQsdUJBUVUsSUFSVixzQkFTUyxPQVRULCtCQVVvQixPQVZwQixvQ0FXeUIsWUFBWSxNQUFaLEVBQW9CLE9BQXBCLEVBQTZCLEtBQTdCLENBWHpCLGtHQWNtQixNQWRuQiw4RkFpQmlCLE1BakJqQiw0SkF1QlUsTUF2QlYsc0JBd0JXLE1BeEJYLGdGQTRCVyxPQTVCWCw4RUFnQ1MsT0FBTyxDQWhDaEIsdUJBaUNVLE9BQU8sQ0FqQ2pCLGlDQWtDb0IsUUFsQ3BCO0FBcURELEM7Ozs7Ozs7OztBQ3hGRDs7Ozs7O0FBRUEsSUFBTSxXQUFXLFNBQVgsUUFBVyxDQUFDLEVBQUQsRUFBUTtBQUN2QixNQUFJLFFBQVMsb0JBQUssRUFBTCxFQUFTLDZCQUFULEVBQXdDLEdBQXhDLENBQWI7QUFDQSxNQUFJLFNBQVMsS0FBVCxFQUFnQixFQUFoQixNQUF3QixDQUE1QixFQUErQjtBQUM3QixXQUFPLEtBQVA7QUFDRDtBQUNELFNBQU8sT0FBTyxVQUFQLENBQWtCLGlCQUFpQixLQUFqQixHQUF5QixLQUEzQyxFQUFrRCxPQUF6RDtBQUNELENBTkQ7O2tCQVFlLFVBQUMsRUFBRCxFQUFRO0FBQ3JCLE1BQUksVUFBVSxPQUFkO0FBQ0EsTUFBSSxTQUFTLEVBQVQsQ0FBSixFQUFrQjtBQUNoQixjQUFVLE1BQVY7QUFDRDtBQUNELEtBQUcsS0FBSCxDQUFTLE9BQVQsR0FBbUIsT0FBbkI7QUFDRCxDOzs7Ozs7Ozs7QUNoQkQ7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBRUEsSUFBTSxZQUFZLEVBQWxCOztrQkFFZSxZQUFNOztBQUVuQixNQUFNLGFBQWEsU0FBUyxjQUFULENBQXdCLFdBQXhCLENBQW5COztBQUVBLE1BQUksc0JBQU8sVUFBUCxDQUFKLEVBQXdCO0FBQ3RCLFFBQUksV0FBVyxvQkFBSyxVQUFMLEVBQWlCLHlCQUFqQixFQUE0QyxHQUE1QyxDQUFmO0FBQ0EsUUFBSSxPQUFXLFNBQVMsb0JBQUssVUFBTCxFQUFpQixxQkFBakIsRUFBd0MsRUFBeEMsQ0FBVCxFQUFzRCxFQUF0RCxDQUFmO0FBQ0EsUUFBSSxRQUFXLG9CQUFLLFVBQUwsRUFBaUIsb0JBQWpCLEVBQXVDLElBQXZDLENBQWY7O0FBRUE7QUFDQSxRQUFJLFVBQVUsU0FBUyxhQUFULENBQXVCLE9BQXZCLENBQWQ7QUFDQSxZQUFRLFdBQVIsR0FBc0IsbUJBQUksVUFBSixFQUFnQixJQUFoQixFQUFzQixLQUF0QixDQUF0QjtBQUNBLGFBQVMsSUFBVCxDQUFjLFdBQWQsQ0FBMEIsT0FBMUI7O0FBRUE7QUFDQSxRQUFNLFdBQVcsV0FBVyxhQUFYLENBQXlCLG1CQUF6QixDQUFqQjtBQUNBLGVBQVcsZ0JBQVgsQ0FBNEIsT0FBNUIsRUFBcUMsVUFBQyxDQUFELEVBQU87QUFDMUMsUUFBRSxjQUFGO0FBQ0EsVUFBSSxzQkFBTyxRQUFQLENBQUosRUFBc0I7QUFDcEIsWUFBTSxPQUFPLFdBQVcscUJBQVgsRUFBYjtBQUNBLGlCQUFTLEtBQVQsQ0FBZSxJQUFmLEdBQXVCLEVBQUUsT0FBRixHQUFZLEtBQUssSUFBakIsR0FBd0IsSUFBekIsR0FBaUMsSUFBdkQ7QUFDQSxpQkFBUyxLQUFULENBQWUsR0FBZixHQUFzQixFQUFFLE9BQUYsR0FBWSxLQUFLLEdBQWpCLEdBQXVCLElBQXhCLEdBQWdDLElBQXJEO0FBQ0EsWUFBSSxDQUFDLFNBQVMsU0FBVCxDQUFtQixRQUFuQixDQUE0Qiw2QkFBNUIsQ0FBTCxFQUFpRTtBQUMvRCxtQkFBUyxTQUFULENBQW1CLEdBQW5CLENBQXVCLDZCQUF2QjtBQUNBLHFCQUFXLFlBQU07QUFDZixxQkFBUyxTQUFULENBQW1CLE1BQW5CLENBQTBCLDZCQUExQjtBQUNELFdBRkQsRUFFRyxHQUZIO0FBR0Q7QUFDRjtBQUNEO0FBQ0QsS0FkRCxFQWNHLEtBZEg7O0FBZ0JBO0FBQ0EsZUFBVyxnQkFBWCxDQUE0QixTQUE1QixFQUF1QyxVQUFDLENBQUQsRUFBTztBQUM1QyxRQUFFLGNBQUY7QUFDQSxVQUFJLEVBQUUsT0FBRixLQUFjLFNBQWxCLEVBQTZCO0FBQzNCO0FBQ0Q7QUFDRixLQUxELEVBS0csS0FMSDs7QUFPQTtBQUNBLFFBQUksa0JBQUo7QUFDQSxXQUFPLGdCQUFQLENBQXdCLFFBQXhCLEVBQWtDLFlBQU07QUFDdEMsVUFBSSxTQUFKLEVBQWU7QUFDYiw2QkFBcUIsU0FBckI7QUFDRDtBQUNELFVBQUksU0FBVSxPQUFPLFdBQVAsR0FBcUIsUUFBdEIsR0FBa0MsS0FBbEMsR0FBMEMsUUFBdkQ7QUFDQSxpQkFBVyxTQUFYLENBQXFCLE1BQXJCLEVBQTZCLHFCQUE3QjtBQUNELEtBTkQsRUFNRyxLQU5IOztBQVFBO0FBQ0EsV0FBTyxnQkFBUCxDQUF3QixRQUF4QixFQUFrQyxZQUFNO0FBQ3RDLDZCQUFRLFVBQVI7QUFDRCxLQUZELEVBRUcsS0FGSDtBQUdBLDJCQUFRLFVBQVI7QUFDRDtBQUNGLEM7Ozs7Ozs7OztrQkNoRWMsVUFBQyxFQUFELEVBQVE7QUFDckIsTUFBTSxXQUFXLFNBQVMsYUFBVCxDQUF1QixLQUF2QixDQUFqQjtBQUNBLFdBQVMsU0FBVCxDQUFtQixHQUFuQixDQUF1QixrQkFBdkI7QUFDQSxLQUFHLFdBQUgsQ0FBZSxRQUFmO0FBQ0QsQzs7Ozs7Ozs7QUNKRCxJQUFNLGVBQWUsSUFBckI7QUFDQSxJQUFNLFdBQWEsRUFBbkI7O0FBRUEsSUFBTSxTQUFTLFNBQVQsTUFBUyxDQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVYsRUFBZ0I7QUFDN0IsU0FBTyxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUosR0FBUSxDQUFiLElBQWtCLENBQWxCLEdBQXNCLENBQXRCLEdBQTBCLENBQS9CLElBQW9DLENBQTNDO0FBQ0QsQ0FGRDs7QUFJQSxJQUFNLFdBQVcsU0FBWCxRQUFXLENBQUMsSUFBRCxFQUFPLEVBQVAsRUFBYztBQUM3QixNQUFJLFlBQWMsSUFBSSxJQUFKLEVBQWxCO0FBQ0EsTUFBSSxXQUFhLEtBQUssSUFBdEI7QUFDQSxNQUFJLGFBQWEsWUFBWSxZQUFNO0FBQ2pDLFFBQUksT0FBUSxJQUFJLElBQUosRUFBRCxHQUFlLFNBQTFCO0FBQ0EsUUFBSSxVQUFVLE9BQU8sSUFBUCxFQUFhLElBQWIsRUFBbUIsUUFBbkIsRUFBNkIsWUFBN0IsQ0FBZDs7QUFFQSxRQUFJLE9BQU8sWUFBWCxFQUF5QjtBQUN2QixvQkFBYyxVQUFkO0FBQ0EsZ0JBQVUsT0FBTyxRQUFqQjtBQUNEOztBQUVELFdBQU8sUUFBUCxDQUFnQixDQUFoQixFQUFtQixPQUFuQjtBQUNELEdBVmdCLEVBVWQsUUFWYyxDQUFqQjtBQVdELENBZEQ7O0FBZ0JBLElBQU0sU0FBUyxTQUFULE1BQVMsR0FBTTtBQUNuQixNQUFJLE9BQU8sT0FBTyxXQUFQLElBQXNCLFNBQVMsZUFBVCxDQUF5QixTQUEvQyxJQUE0RCxTQUFTLElBQVQsQ0FBYyxTQUExRSxJQUF1RixDQUFsRztBQUNBLE1BQUksS0FBSyxDQUFUO0FBQ0EsV0FBUyxJQUFULEVBQWUsRUFBZjtBQUNELENBSkQ7O2tCQU1lLE07Ozs7O0FDN0JmOzs7Ozs7QUFFQSxTQUFTLGdCQUFULENBQTBCLGtCQUExQixtQkFBb0QsS0FBcEQiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwidmFyIGlzVW5kZWZpbmVkID0gcmVxdWlyZSgnLi9pc1VuZGVmaW5lZCcpO1xudmFyIGlzTnVsbCA9IHJlcXVpcmUoJy4vaXNOdWxsJyk7XG5cbi8qKlxuICogZXhpc3QgdmFsdWUuXG4gKiB2YWx1ZSBpcyBub3QgdW5kZWZpbmVkIGFuZCBudWxsLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsIGNoZWNrIHZhbHVlLlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih2YWwpIHtcbiAgcmV0dXJuICFpc1VuZGVmaW5lZCh2YWwpICYmICFpc051bGwodmFsKTtcbn07XG4iLCIvKipcbiAqIGNoZWNrIG51bGwgdmFsdWVcbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBjaGVjayB2YWx1ZS5cbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odmFsKSB7XG4gIHJldHVybiB2YWwgPT09IG51bGw7XG59O1xuIiwiLyoqXG4gKiBjaGVjayB2YWx1ZSBpcyB1bmRlZmluZWQuXG4gKlxuICogQHBhcmFtIHsqfSB2YWwgY2hlY2tlZCB2YWx1ZS5cbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJztcbn07XG4iLCJpbXBvcnQgZXhpc3R5IGZyb20gJ3N3c3V0aWxzL3NyYy9leGlzdHknO1xuXG5leHBvcnQgZGVmYXVsdCAoZWwsIGtleSwgb3JpZykgPT4ge1xuICBpZiAoZXhpc3R5KGVsKSAmJiBlbC5oYXNBdHRyaWJ1dGUoa2V5KSkge1xuICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoa2V5KTtcbiAgfVxuICByZXR1cm4gb3JpZztcbn07XG4iLCJpbXBvcnQgZXhpc3R5IGZyb20gJ3N3c3V0aWxzL3NyYy9leGlzdHknO1xuaW1wb3J0IGF0dHIgZnJvbSAnLi9hdHRyLmpzJztcbmltcG9ydCByaXBwbGUgZnJvbSAnLi9yaXBwbGUuanMnO1xuXG5jb25zdCBtYWtlQmdJbWFnZSA9ICh3ZWlnaHQsIGZnQ29sb3IsIGltYWdlKSA9PiB7XG4gIGlmIChleGlzdHkoaW1hZ2UpKSB7XG4gICAgcmV0dXJuIGltYWdlO1xuICB9XG4gIGxldCBjID0gZmdDb2xvci5yZXBsYWNlKC9eIy8sICcnKTtcbiAgaWYgKHdlaWdodCA9PT0gJ2JvbGQnKSB7XG4gICAgcmV0dXJuICdkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGY4LCAlM0NzdmcgdmVyc2lvbj0lMjcxLjElMjcgeG1sbnM9JTI3aHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmclMjcgd2lkdGg9JTI3MTBweCUyNyBoZWlnaHQ9JTI3MTBweCUyNyUzRSAlM0Nwb2x5Z29uIGZpbGw9JTI3JTIzJyArIGMgKyAnJTI3IHN0cm9rZT0lMjdub25lJTI3IHBvaW50cz0lMjc4LjY0Niw3LjM1NCA1LDMuNzA3IDEuMzU0LDcuMzU0IDAuNjQ2LDYuNjQ2IDUsMi4yOTMgOS4zNTQsNi42NDYlMjcgLyUzRSAlM0Mvc3ZnJTNFJztcbiAgfVxuICByZXR1cm4gJ2RhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0ZjgsJTNDc3ZnIHZlcnNpb249JTI3MS4xJTI3IHhtbG5zPSUyN2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJTI3IHdpZHRoPSUyNzEwcHglMjcgaGVpZ2h0PSUyNzEwcHglMjclM0UgJTNDcG9seWdvbiBmaWxsPSUyNyUyMycgKyBjICsgJyUyNyBzdHJva2U9JTI3bm9uZSUyNyBwb2ludHM9JTI3OC41ODksNi45NDUgNSwzLjIyIDEuNDEzLDYuOTQ1IDEuMDUyLDYuNTk4IDUsMi40OTkgOC45NDgsNi41OTglMjcgLyUzRSAlM0Mvc3ZnJTNFJztcbn07XG5cblxuZXhwb3J0IGRlZmF1bHQgKGVsLCBzaXplLCBpbWFnZSkgPT4ge1xuICBsZXQgcmlnaHQgICAgID0gYXR0cihlbCwgJ2RhdGEtc3dzLWdvdG9wLXJpZ2h0JywgJzUwcHgnKTtcbiAgbGV0IGJvdHRvbSAgICA9IGF0dHIoZWwsICdkYXRhLXN3cy1nb3RvcC1ib3R0b20nLCAnMTAwcHgnKTtcbiAgbGV0IGJvdHRvbUdhcCA9IGF0dHIoZWwsICdkYXRhLXN3cy1nb3RvcC1ib3R0b20tZ2FwJywgJzBweCcpO1xuICBsZXQgekluZGV4ICAgID0gYXR0cihlbCwgJ2RhdGEtc3dzLWdvdG9wLXotaW5kZXgnLCAxMDAwKTtcbiAgbGV0IGJnQ29sb3IgICA9IGF0dHIoZWwsICdkYXRhLXN3cy1nb3RvcC1iZy1jb2xvcicsICcjZmZjOTY2Jyk7XG4gIGxldCBmZ0NvbG9yICAgPSBhdHRyKGVsLCAnZGF0YS1zd3MtZ290b3AtZmctY29sb3InLCAnI2ZmZmZmZicpO1xuICBsZXQgb3BhY2l0eSAgID0gYXR0cihlbCwgJ2RhdGEtc3dzLWdvdG9wLW9wYWNpdHknLCAxKTtcbiAgbGV0IHJhZGl1cyAgICA9IGF0dHIoZWwsICdkYXRhLXN3cy1nb3RvcC1yYWRpdXMnLCAnNTAlJyk7XG4gIGxldCB3ZWlnaHQgICAgPSBhdHRyKGVsLCAnZGF0YS1zd3MtZ290b3Atd2VpZ2h0JywgJ25vcm1hbCcpO1xuICBsZXQgcmlwcGxlQmcgID0gYXR0cihlbCwgJ2RhdGEtc3dzLWdvdG9wLXJpcHBsZS1jb2xvcicsICdyZ2JhKDI1NSwgMjU1LCAyNTUsIC41KScpO1xuXG4gIC8vIGFkZCByaXBwbGUgbGF5ZXJcbiAgaWYgKCFleGlzdHkoaW1hZ2UpKSB7XG4gICAgcmlwcGxlKGVsKTtcbiAgfVxuXG4gIC8vIGFkZCBzdHlsZS5cbiAgbGV0IGJnU2l6ZSA9IGV4aXN0eShpbWFnZSkgPyAnMTAwJScgOiAnNzAlJztcbiAgcmV0dXJuIGBcbiNzd3MtZ290b3Age1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHJpZ2h0OiAke3JpZ2h0fTtcbiAgYm90dG9tOiBjYWxjKCR7Ym90dG9tfSAtICR7Ym90dG9tR2FwfSk7XG4gIHotaW5kZXg6IC0xO1xuICB3aWR0aDogJHtzaXplfXB4O1xuICBoZWlnaHQ6ICR7c2l6ZX1weDtcbiAgY29sb3I6ICR7ZmdDb2xvcn07XG4gIGJhY2tncm91bmQtY29sb3I6ICR7YmdDb2xvcn07XG4gIGJhY2tncm91bmQtaW1hZ2U6IHVybChcIiR7bWFrZUJnSW1hZ2Uod2VpZ2h0LCBmZ0NvbG9yLCBpbWFnZSl9XCIpO1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiA1MCUgNTAlO1xuICBiYWNrZ3JvdW5kLXNpemU6ICR7YmdTaXplfSBhdXRvO1xuICBib3gtc2hhZG93OiAxcHggMXB4IDJweCByZ2JhKDAsIDAsIDAsIC4zKTtcbiAgb3BhY2l0eTogMDtcbiAgYm9yZGVyLXJhZGl1czogJHtyYWRpdXN9O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRyYW5zaXRpb246IG5vbmUgLjJzIGVhc2Utb3V0IDBzO1xuICB0cmFuc2l0aW9uLXByb3BlcnR5OiBvcGFjaXR5LCBib3R0b207XG59XG4jc3dzLWdvdG9wLmlzLXN3cy1nb3RvcC1hY3RpdmUge1xuICBib3R0b206ICR7Ym90dG9tfTtcbiAgei1pbmRleDogJHt6SW5kZXh9O1xuICBvcGFjaXR5OiAxO1xufVxuI3N3cy1nb3RvcC5pcy1zd3MtZ290b3AtYWN0aXZlOmhvdmVyIHtcbiAgb3BhY2l0eTogJHtvcGFjaXR5fTtcbn1cbiNzd3MtZ290b3AgLnN3cy1nb3RvcC1yaXBwbGUge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiAke3NpemUgKiAyfXB4O1xuICBoZWlnaHQ6ICR7c2l6ZSAqIDJ9cHg7XG4gIGJhY2tncm91bmQtY29sb3I6ICR7cmlwcGxlQmd9O1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIHRyYW5zZm9ybTogc2NhbGUoMCk7XG4gIG9wYWNpdHk6IDA7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xufVxuI3N3cy1nb3RvcCAuc3dzLWdvdG9wLXJpcHBsZS5pcy1zd3MtZ290b3AtcmlwcGxlLWFuaW1hdGUge1xuICBhbmltYXRpb246IHN3cy1nb3RvcC1yaXBwbGUtYW5pbWF0aW9uIC43NXMgZWFzZS1vdXQ7XG59XG5Aa2V5ZnJhbWVzIHN3cy1nb3RvcC1yaXBwbGUtYW5pbWF0aW9uIHtcbiAgZnJvbSB7XG4gICAgb3BhY2l0eTogMTtcbiAgfVxuICB0byB7XG4gICAgdHJhbnNmb3JtOiBzY2FsZSgyKTtcbiAgICBvcGFjaXR5OiAwO1xuICB9XG59XG5gO1xufTtcbiIsImltcG9ydCBhdHRyIGZyb20gJy4vYXR0ci5qcyc7XG5cbmNvbnN0IGlzTW9iaWxlID0gKGVsKSA9PiB7XG4gIGxldCB3aWR0aCAgPSBhdHRyKGVsLCAnZGF0YS1zd3MtZ290b3AtbW9iaWxlLXdpZHRoJywgNjQwKTtcbiAgaWYgKHBhcnNlSW50KHdpZHRoLCAxMCkgPT09IDApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHdpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOiAnICsgd2lkdGggKyAncHgpJykubWF0Y2hlcztcbn07XG5cbmV4cG9ydCBkZWZhdWx0IChlbCkgPT4ge1xuICBsZXQgZGlzcGxheSA9ICdibG9jayc7XG4gIGlmIChpc01vYmlsZShlbCkpIHtcbiAgICBkaXNwbGF5ID0gJ25vbmUnO1xuICB9XG4gIGVsLnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5O1xufTtcbiIsImltcG9ydCBleGlzdHkgZnJvbSAnc3dzdXRpbHMvc3JjL2V4aXN0eSc7XG5pbXBvcnQgYXR0ciBmcm9tICcuL2F0dHIuanMnO1xuaW1wb3J0IGNzcyBmcm9tICcuL2Nzcy5qcyc7XG5pbXBvcnQgc2Nyb2xsIGZyb20gJy4vc2Nyb2xsLmpzJztcbmltcG9ydCBkaXNwbGF5IGZyb20gJy4vZGlzcGxheS5qcyc7XG5cbmNvbnN0IEtFWV9FTlRFUiA9IDEzO1xuXG5leHBvcnQgZGVmYXVsdCAoKSA9PiB7XG5cbiAgY29uc3QgZWxTd3NHb3RvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzd3MtZ290b3AnKTtcblxuICBpZiAoZXhpc3R5KGVsU3dzR290b3ApKSB7XG4gICAgbGV0IGJvdW5kYXJ5ID0gYXR0cihlbFN3c0dvdG9wLCAnZGF0YS1zd3MtZ290b3AtYm91bmRhcnknLCAyMDApO1xuICAgIGxldCBzaXplICAgICA9IHBhcnNlSW50KGF0dHIoZWxTd3NHb3RvcCwgJ2RhdGEtc3dzLWdvdG9wLXNpemUnLCA1MCksIDEwKTtcbiAgICBsZXQgaW1hZ2UgICAgPSBhdHRyKGVsU3dzR290b3AsICdkYXRhLXN3cy1nb3RvcC1zcmMnLCBudWxsKTtcblxuICAgIC8vIGFkZCBzdHlsZS5cbiAgICBsZXQgZWxTdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1NUWUxFJyk7XG4gICAgZWxTdHlsZS50ZXh0Q29udGVudCA9IGNzcyhlbFN3c0dvdG9wLCBzaXplLCBpbWFnZSk7XG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChlbFN0eWxlKTtcblxuICAgIC8vIHNjcm9sbCB0byB0b3AgYnkgY2xpY2sgZXZlbnQuXG4gICAgY29uc3QgZWxSaXBwbGUgPSBlbFN3c0dvdG9wLnF1ZXJ5U2VsZWN0b3IoJy5zd3MtZ290b3AtcmlwcGxlJyk7XG4gICAgZWxTd3NHb3RvcC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoZXhpc3R5KGVsUmlwcGxlKSkge1xuICAgICAgICBjb25zdCByZWN0ID0gZWxTd3NHb3RvcC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgZWxSaXBwbGUuc3R5bGUubGVmdCA9IChlLmNsaWVudFggLSByZWN0LmxlZnQgLSBzaXplKSArICdweCc7XG4gICAgICAgIGVsUmlwcGxlLnN0eWxlLnRvcCA9IChlLmNsaWVudFkgLSByZWN0LnRvcCAtIHNpemUpICsgJ3B4JztcbiAgICAgICAgaWYgKCFlbFJpcHBsZS5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLXN3cy1nb3RvcC1yaXBwbGUtYW5pbWF0ZScpKSB7XG4gICAgICAgICAgZWxSaXBwbGUuY2xhc3NMaXN0LmFkZCgnaXMtc3dzLWdvdG9wLXJpcHBsZS1hbmltYXRlJyk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBlbFJpcHBsZS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1zd3MtZ290b3AtcmlwcGxlLWFuaW1hdGUnKTtcbiAgICAgICAgICB9LCA3NTApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzY3JvbGwoKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICAvLyBzY3JvbGwgdG8gdG9wIGJ5IGVudGVyIGtleSBkb3duIGV2ZW50LlxuICAgIGVsU3dzR290b3AuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoZS5rZXlDb2RlID09PSBLRVlfRU5URVIpIHtcbiAgICAgICAgc2Nyb2xsKCk7XG4gICAgICB9XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgLy8gdG9nZ2xlIGRpc3BsYXkgYnkgc2Nyb2xsaW5nLlxuICAgIGxldCByZXF1ZXN0SUQ7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHtcbiAgICAgIGlmIChyZXF1ZXN0SUQpIHtcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUocmVxdWVzdElEKTtcbiAgICAgIH1cbiAgICAgIGxldCBtZXRob2QgPSAod2luZG93LnBhZ2VZT2Zmc2V0ID4gYm91bmRhcnkpID8gJ2FkZCcgOiAncmVtb3ZlJztcbiAgICAgIGVsU3dzR290b3AuY2xhc3NMaXN0W21ldGhvZF0oJ2lzLXN3cy1nb3RvcC1hY3RpdmUnKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICAvLyBoaWRlIGVsZW1lbnQgd2l0aCBtb2JpbGUgZGV2aWNlLlxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgICBkaXNwbGF5KGVsU3dzR290b3ApO1xuICAgIH0sIGZhbHNlKTtcbiAgICBkaXNwbGF5KGVsU3dzR290b3ApO1xuICB9XG59O1xuIiwiZXhwb3J0IGRlZmF1bHQgKGVsKSA9PiB7XG4gIGNvbnN0IGVsUmlwcGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XG4gIGVsUmlwcGxlLmNsYXNzTGlzdC5hZGQoJ3N3cy1nb3RvcC1yaXBwbGUnKTtcbiAgZWwuYXBwZW5kQ2hpbGQoZWxSaXBwbGUpO1xufTtcbiIsImNvbnN0IFNDUk9MTF9TUEVFRCA9IDEwMDA7XG5jb25zdCBJTlRFUlZBTCAgID0gMTY7XG5cbmNvbnN0IGVhc2luZyA9ICh0LCBiLCBjLCBkKSA9PiB7XG4gIHJldHVybiBjICogKCh0ID0gdCAvIGQgLSAxKSAqIHQgKiB0ICsgMSkgKyBiO1xufTtcblxuY29uc3Qgc2Nyb2xsVG8gPSAoZnJvbSwgdG8pID0+IHtcbiAgbGV0IHN0YXJ0VGltZSAgPSAobmV3IERhdGUoKSk7XG4gIGxldCBkaXN0YW5jZSAgID0gdG8gLSBmcm9tO1xuICBsZXQgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICBsZXQgdGltZSA9IChuZXcgRGF0ZSgpKSAtIHN0YXJ0VGltZTtcbiAgICBsZXQgY3VycmVudCA9IGVhc2luZyh0aW1lLCBmcm9tLCBkaXN0YW5jZSwgU0NST0xMX1NQRUVEKTtcblxuICAgIGlmICh0aW1lID4gU0NST0xMX1NQRUVEKSB7XG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsSWQpO1xuICAgICAgY3VycmVudCA9IGZyb20gKyBkaXN0YW5jZTtcbiAgICB9XG5cbiAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgY3VycmVudCk7XG4gIH0sIElOVEVSVkFMKTtcbn07XG5cbmNvbnN0IHNjcm9sbCA9ICgpID0+IHtcbiAgbGV0IGZyb20gPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCB8fCAwO1xuICBsZXQgdG8gPSAwO1xuICBzY3JvbGxUbyhmcm9tLCB0byk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBzY3JvbGw7XG4iLCJpbXBvcnQgaW5pdCBmcm9tICcuL2luZGV4LmpzJztcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGluaXQsIGZhbHNlKTtcbiJdfQ==
